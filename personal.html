<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <script>
      (function () {
        try {
          document.documentElement.classList.add("loading");
          window.addEventListener("load", function () {
            document.documentElement.classList.remove("loading");
          });

          var y = window.scrollY || document.documentElement.scrollTop || 0;
          document.documentElement.dataset._scrollY = String(y);
          document.documentElement.classList.toggle("at-top", y <= 8);
        } catch (e) {}
      })();
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Personal ‚Ä¢ Student Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Space+Grotesk:wght@600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <style>
      /* ---- Personal page: profile card ---- */
      .personal-avatar {
        width: 52px;
        height: 52px;
        border-radius: 50%;
        background: color-mix(in srgb, var(--accent) 18%, transparent);
        border: 2px solid color-mix(in srgb, var(--accent) 35%, transparent);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--accent);
        flex-shrink: 0;
      }
      .personal-profile-name {
        font-size: 1.15rem;
        font-weight: 600;
      }

      /* ---- Skeleton loader ---- */
      .personal-profile-skeleton {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 20px 24px;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 14px;
        margin-bottom: 24px;
      }
      .skeleton-avatar {
        width: 52px;
        height: 52px;
        border-radius: 50%;
        background: var(--border);
        flex-shrink: 0;
        position: relative;
        overflow: hidden;
      }
      .skeleton-lines {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .skeleton-line {
        height: 14px;
        border-radius: 6px;
        background: var(--border);
        position: relative;
        overflow: hidden;
      }
      .skeleton-line--wide  { width: 60%; }
      .skeleton-line--mid   { width: 45%; }
      .skeleton-line--narrow { width: 35%; }
      .skeleton-card {
        min-height: 72px;
      }
      /* Shimmer sweep on skeleton elements */
      .skeleton-avatar::after,
      .skeleton-line::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          90deg,
          transparent,
          color-mix(in srgb, var(--accent) 18%, transparent),
          transparent
        );
        transform: translateX(-100%);
        animation: skeletonSweep 1.6s ease-in-out infinite;
      }
      @keyframes skeletonSweep {
        0%   { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }
      @media (prefers-reduced-motion: reduce) {
        .skeleton-avatar::after,
        .skeleton-line::after { animation: none; }
      }

      /* ---- Show/hide password toggle ---- */
      .input-with-toggle {
        position: relative;
        display: flex;
        align-items: center;
      }
      .input-with-toggle input {
        flex: 1;
        padding-right: 56px !important;
      }
      .input-toggle-btn {
        position: absolute;
        right: 10px;
        background: none;
        border: none;
        cursor: pointer;
        color: var(--muted);
        font-size: 0.78rem;
        font-weight: 600;
        padding: 4px 6px;
        border-radius: 6px;
        transition: color 0.15s;
        letter-spacing: 0.02em;
      }
      .input-toggle-btn:hover { color: var(--text); }
    </style>
    <link rel="manifest" href="manifest.json" />
    <script defer src="page-transitions.js"></script>
    <script defer src="back-to-top.js"></script>
    <script defer src="sw-register.js"></script>
    <script defer src="topbar-state.js"></script>
    <script defer src="theme.js"></script>
    <script defer src="auth.js"></script>
    <script defer src="nav.js"></script>
    <script defer src="nav-auth.js"></script>
    <script defer src="personal.js"></script>
  </head>

  <body>
    <a class="skip-link" href="#main">Skip to content</a>
    <div class="container">
      <header class="topbar">
        <a class="brand" href="index.html">Student Hub</a>

        <nav class="nav">
          <a href="modules.html">Modules</a>
          <a href="index.html?to=resources">Resources</a>
          <a href="index.html?contact=1">Contact</a>

          <button class="theme-btn" id="themeToggle" type="button" aria-label="Toggle theme">
            üåô
          </button>
        </nav>
      </header>

      <main class="page" id="main">
        <h1>Personal</h1>
        <p class="subtitle">Your personalized dashboard and notes.</p>

        <div id="personalEmptyState" hidden>
          <div class="card" style="text-align:center; padding:40px 20px;">
            <h2 style="margin:0 0 12px;">Verify your profile to access</h2>
            <p class="muted" style="margin:0 0 20px;">
              Enter your username and access key to view personalized content.
            </p>
            <button class="btn primary" onclick="window.openAuthModal?.()">Verify Profile</button>
          </div>
        </div>

        <div id="personalMount"></div>
      </main>

      <footer class="footer simple">
        <p class="muted">‚Üê <a href="index.html">Back to Home</a></p>
        <p class="muted">Not affiliated with NUST. Student-made hub.</p>
      </footer>
    </div>

    <!-- Verification Modal -->
    <dialog class="modal" id="authModal">
      <div class="modal-inner">
        <div class="modal-top">
          <div>
            <p class="modal-date">Verification</p>
            <h3 class="modal-title">Verify Profile</h3>
          </div>
          <button class="modal-close" type="button" id="authClose" aria-label="Close">‚úï</button>
        </div>

        <p class="modal-body">
          Enter your username and access key to access personalized content.
        </p>

        <div style="margin:12px 0;">
          <label style="display:block; margin-bottom:6px; font-weight:600;">Username</label>
          <input
            type="text"
            id="authUsername"
            placeholder="username"
            autocomplete="username"
            style="width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:var(--card); color:var(--text); outline:none;"
          />
        </div>

        <div style="margin:12px 0;">
          <label style="display:block; margin-bottom:6px; font-weight:600;">Access Key</label>
          <div class="input-with-toggle">
            <input
              type="password"
              id="authAccessKey"
              placeholder="access key"
              autocomplete="current-password"
              style="width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:var(--card); color:var(--text); outline:none;"
            />
            <button
              type="button"
              id="authTogglePassword"
              class="input-toggle-btn"
              aria-label="Show access key"
            >Show</button>
          </div>
        </div>

        <p id="authError" class="muted" style="margin:8px 0; color:#ff6b6b; display:none;"></p>

        <div class="modal-actions">
          <button class="btn primary" type="button" id="authSubmit">Verify</button>
        </div>
      </div>
    </dialog>
  </body>
</html>
